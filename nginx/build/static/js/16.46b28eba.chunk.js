(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{644:function(e,t,a){"use strict";a.r(t);var s=a(10),r=a.n(s),l=a(15),i=a(4),n=a(5),c=a(8),o=a(7),d=a(9),u=a(0),f=a.n(u),b=(a(19),a(17)),y=a(35),h=a(16),p=a(542),v=(a(636),a(637)),m=a.n(v),g=p.b.controllers.doughnut.prototype.draw;p.b.helpers.extend(p.b.controllers.doughnut.prototype,{draw:function(){g.apply(this,arguments);var e=this.chart,t=e.legend.height,a=e.chart.width,s=e.chart.height,r=e.chart.ctx,l=(s/270).toFixed(2);r.font=l+"em sans-serif",r.textBaseline="middle";for(var i=0,n=0;n<e.config.data.datasets[0].data.length;n++)i+=e.config.data.datasets[0].data[n];var c="\u0412\u0441\u0435\u0433\u043e: "+i,o=Math.round((a-r.measureText(c).width)/2),d=(t+s)/2;r.fillText(c,o,d)}});var j=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(h.a)("/api/getStatistics",{faculty:y.a.faculty}),a=Object(h.a)("/api/checked",{faculty:y.a.faculty}),e.t0=this,e.next=5,t;case 5:return e.t1=e.sent,e.next=8,a;case 8:e.t2=e.sent.Info,e.t3={statistics:e.t1,users:e.t2},e.t0.setState.call(e.t0,e.t3);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"makeUsersMatrix",value:function(e,t,a,s,r){var l=y.a.criterias,i=[],n=!0,c=!1,o=void 0;try{for(var d,u=e[Symbol.iterator]();!(n=(d=u.next()).done);n=!0){var f=d.value;t[f.user]=0;var b=[];if(r[f.Type[0]+f.Course]||(r[f.Type[0]+f.Course]=0),r[f.Type[0]+f.Course]+=1,!a[f.Type+f.Course]){a[f.Type+f.Course]=[],s[f.Type+f.Course]=[];for(var h=0;h<Object.keys(l).length;h++)a[f.Type+f.Course].push(0),s[f.Type+f.Course].push(0)}for(var p=0;p<Object.keys(l).length;p++)b.push(0);var v=!0,m=!1,g=void 0;try{for(var j,k=f.Achievements[Symbol.iterator]();!(v=(j=k.next()).done);v=!0){var O=j.value;if("\u041f\u0440\u0438\u043d\u044f\u0442\u043e"==O.status||"\u041f\u0440\u0438\u043d\u044f\u0442\u043e \u0441 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\u043c\u0438"==O.status){var C=Object.keys(l).indexOf(O.chars[0]);b[C]+=O.ball,a[f.Type+f.Course][C]+=O.ball,s[f.Type+f.Course][C]+=1,t[f.user]+=O.ball}}}catch(T){m=!0,g=T}finally{try{v||null==k.return||k.return()}finally{if(m)throw g}}i.push(b)}}catch(T){c=!0,o=T}finally{try{n||null==u.return||u.return()}finally{if(c)throw o}}for(var E=0,x=Object.keys(a);E<x.length;E++)for(var w=x[E],F=0;F<a[w].length;F++)s[w][F]>0&&(a[w][F]=a[w][F]/s[w][F]);return i}},{key:"makePCA",value:function(e){var t=m.a.getEigenVectors(e),a=m.a.computePercentageExplained(t,t[0]),s=m.a.computePercentageExplained(t,t[1]);console.log("EXPL",a,s);var r=m.a.computeAdjustedData(e,t[0],t[1]);return console.log("DATA",r),r}},{key:"render",value:function(){var e,t,a,s,r,l,i,n,c={},o={},d={},u={},b={},h={};if(this.state.users&&y.a.criterias){var v=this.makeUsersMatrix(this.state.users,h,c,o,d);r=this.makePCA(v);for(var m=[],g=[],j=[],k=0;k<r.adjustedData[0].length;k++)m.push({x:r.adjustedData[0][k],y:r.adjustedData[1][k]}),g.push([r.adjustedData[0][k],r.adjustedData[1][k]]),j.push(this.state.users[k].user);l={labels:j,datasets:[{label:"Scatter Dataset",backgroundColor:"#ff0000",data:m}]},i={labels:Object.keys(y.a.criterias),datasets:[]},n={labels:Object.keys(y.a.criterias),datasets:[]};var O=["rgba(102,233,125,0.76)","rgba(0,0,255,0.75)","rgba(255,252,7,0.75)","rgba(255,167,0,0.75)","rgba(147,0,165,0.75)","rgba(255,0,2,0.75)"];u={labels:Object.keys(d),datasets:[{data:Object.values(d),backgroundColor:O}]},b={labels:Object.keys(y.a.criterias),datasets:[]};for(var C=0,E=Object.keys(d);C<E.length;C++){var x=E[C],w=[];console.log(Object.keys(o),x[-1]);var F="";"\u0411"==x[0]&&(F="\u0411\u0430\u043a\u0430\u043b\u0430\u0432\u0440\u0438\u0430\u0442"),"\u041c"==x[0]&&(F="\u041c\u0430\u0433\u0438\u0441\u0442\u0440\u0430\u0442\u0443\u0440\u0430"),"\u0421"==x[0]&&(F="\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0442\u0435\u0442"),F+=x[x.length-1];for(var T=0;T<o[F].length;T++)w.push(0),d[x]>0&&(w[T]=o[F][T]/d[x]);b.datasets.push({label:x,data:w,backgroundColor:O[Object.keys(c).indexOf(F)],borderColor:O[Object.keys(c).indexOf(F)],fill:!1})}for(var A=0,P=Object.keys(c);A<P.length;A++){var S=P[A];i.datasets.push({label:S,data:c[S],backgroundColor:O[Object.keys(c).indexOf(S)],borderColor:O[Object.keys(c).indexOf(S)],fill:!1}),n.datasets.push({label:S,data:o[S],backgroundColor:O[Object.keys(c).indexOf(S)],borderColor:O[Object.keys(c).indexOf(S)],fill:!1})}}if(this.state.statistics){e={labels:["\u0420\u0418\u041d\u0426","SCOPUS","\u0412\u0410\u041a","\u041d\u0435\u0438\u043d\u0434\u0435\u043a\u0441."],datasets:[{data:[this.state.statistics.RINC,this.state.statistics.SCOPUS,this.state.statistics.VAK,this.state.statistics.Unindexed],backgroundColor:["#FF6384","#36A2EB","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]},console.log("KEYS",Object.keys(this.state.statistics.CritsCounts));var B=y.a.criterias,D={};if(B){for(var M=0;M<Object.keys(B).length;M++)D[Object.keys(B)[M]]=this.state.statistics.CritsCounts[Object.keys(B)[M]];for(var N=0;N<Object.keys(B).length;N++)D[Object.keys(B)[N]]||(D[Object.keys(B)[N]]=0)}B&&(t={labels:Object.keys(B),datasets:[{data:Object.values(D),label:"",backgroundColor:["#6366ff","#6366ff","#6366ff","#4cab59","#4cab59","#ff464a","#ff464a","#9300a5","#9300a5","#9300a5","#FFCE56","#FFCE56","#FFCE56"]}]});var U={};if(B){for(var L=0;L<Object.keys(B).length;L++)U[Object.keys(B)[L]]=this.state.statistics.CritsBalls[Object.keys(B)[L]];for(var I=0;I<Object.keys(B).length;I++)U[Object.keys(B)[I]]||(U[Object.keys(B)[I]]=0)}B&&(a={labels:Object.keys(U),datasets:[{data:Object.values(U),backgroundColor:["#6366ff","#6366ff","#6366ff","#4cab59","#4cab59","#ff464a","#ff464a","#9300a5","#9300a5","#9300a5","#FFCE56","#FFCE56","#FFCE56"]}]});var J={};if(B){for(var K=0;K<Object.keys(B).length;K++)D[Object.keys(B)[K]]>0?J[Object.keys(B)[K]]=(U[Object.keys(B)[K]]/D[Object.keys(B)[K]]).toFixed(2):J[Object.keys(B)[K]]=0;s={labels:Object.keys(J),datasets:[{data:Object.values(J),backgroundColor:["#6366ff","#6366ff","#6366ff","#4cab59","#4cab59","#ff464a","#ff464a","#9300a5","#9300a5","#9300a5","#FFCE56","#FFCE56","#FFCE56"]}]}}}var V={legend:{display:!1},plugins:{labels:[{render:"value",fontColor:"#000000"}]},layout:{padding:{left:0,right:0,top:20,bottom:0}}};return f.a.createElement("main",null,f.a.createElement("div",{id:"panel",className:"row justify_center"},f.a.createElement("div",{className:"col-9 general"},f.a.createElement("div",{className:"profile",style:{display:"flex","justify-content":"space-between"}},f.a.createElement("div",{className:"centered_ver"},f.a.createElement("p",{className:"headline"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 ",y.a.faculty))),f.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},f.a.createElement("div",{style:{width:"500px",marginBottom:"30px"}},f.a.createElement("h3",{style:{marginBottom:"10px"}},"\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 (\u0432 \u0442.\u0447. \u0442\u0435\u0437\u0438\u0441\u044b)"),this.state.statistics&&f.a.createElement(p.c,{data:e,options:{legend:{showLegend:!1},plugins:{labels:[{render:"label",position:"outside",fontColor:"#000000",outsidePadding:6,textMargin:10},{render:"value",fontColor:"#000000"}]}}})),f.a.createElement("div",{style:{width:"500px"}},f.a.createElement("h3",null,"\u0414\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0439 \u043f\u043e \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u044f\u043c: "),this.state.statistics&&y.a.criterias&&f.a.createElement(p.a,{data:t,height:170,options:V}))),f.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},f.a.createElement("div",{style:{width:"500px"}},f.a.createElement("h3",null,"\u0411\u0430\u043b\u043b\u043e\u0432 \u043f\u043e \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u044f\u043c: "),this.state.statistics&&y.a.criterias&&f.a.createElement(p.a,{data:a,options:V})),f.a.createElement("div",{style:{width:"500px"}},f.a.createElement("h3",null,"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0431\u0430\u043b\u043b \u0437\u0430 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0435: "),this.state.statistics&&y.a.criterias&&f.a.createElement(p.a,{data:s,options:V}))),f.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},f.a.createElement("div",{style:{width:"500px"}},f.a.createElement("h3",null,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 PCA: "),this.state.statistics&&y.a.criterias&&f.a.createElement(p.e,{data:l,options:{legend:{display:!1},tooltips:{callbacks:{label:function(e,t){var a=t.labels[e.index];return a+": "+h[a]}}}}})),f.a.createElement("div",{style:{width:"500px",marginBottom:"30px"}},f.a.createElement("h3",{style:{marginBottom:"10px"}},"\u041a\u043e\u043b-\u0432\u043e \u043f\u043e\u0434\u0430\u044e\u0449\u0438\u0445 \u043f\u043e \u043a\u0443\u0440\u0441\u0430\u043c"),this.state.statistics&&f.a.createElement(p.c,{data:u,options:{legend:{showLegend:!1},plugins:{labels:[{render:"label",position:"outside",fontColor:"#000000",outsidePadding:6,textMargin:10},{render:"value",fontColor:"#000000"}]}}}))),f.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"30px"}},f.a.createElement("div",{style:{width:"1000px"}},f.a.createElement("h3",null,"\u0421\u0440\u0435\u0434\u043d\u0438\u0435 \u0431\u0430\u043b\u043b\u044b \u043f\u043e \u043a\u0443\u0440\u0441\u0430\u043c: "),this.state.statistics&&y.a.criterias&&f.a.createElement(p.d,{data:i}))),f.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"30px"}},f.a.createElement("div",{style:{width:"1000px"}},f.a.createElement("h3",null,"\u041a\u043e\u043b-\u0432\u043e \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0439 \u043f\u043e \u043a\u0443\u0440\u0441\u0430\u043c: "),this.state.statistics&&y.a.criterias&&f.a.createElement(p.d,{data:n}))),f.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"30px"}},f.a.createElement("div",{style:{width:"1000px"}},f.a.createElement("h3",null,"\u041a\u043e\u043b-\u0432\u043e \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0439 \u043d\u0430 \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430 \u043f\u043e \u043a\u0443\u0440\u0441\u0430\u043c: "),this.state.statistics&&y.a.criterias&&f.a.createElement(p.d,{data:b}))))))}}]),t}(u.Component);t.default=Object(b.a)(j)}}]);
//# sourceMappingURL=16.46b28eba.chunk.js.map