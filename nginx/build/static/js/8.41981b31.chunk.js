(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{500:function(e,t,a){"use strict";var n=a(5),r=a(8),s=a(7),l=a(9),c=a(2),i=a(4),o=a(0),u=a.n(o),d=(a(19),a(501),function e(t,a,n){Object(i.a)(this,e),this.childs=[],this.ancestor=t,this.childs=a,this.label=n,this.span=0});var m=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).makeTable=a.makeTable.bind(Object(c.a)(Object(c.a)(a))),a.makeHead=a.makeHead.bind(Object(c.a)(Object(c.a)(a))),a.makeHeadRec=a.makeHeadRec.bind(Object(c.a)(Object(c.a)(a))),a.tree=a.tree.bind(Object(c.a)(Object(c.a)(a))),a.incrSpan=a.incrSpan.bind(Object(c.a)(Object(c.a)(a))),a.bodyTree=a.bodyTree.bind(Object(c.a)(Object(c.a)(a))),a.renderList=a.renderList.bind(Object(c.a)(Object(c.a)(a))),a.getPath=a.getPath.bind(Object(c.a)(Object(c.a)(a))),a.getSubHeaderRows=a.getSubHeaderRows.bind(Object(c.a)(Object(c.a)(a))),a}return Object(l.a)(t,e),Object(n.a)(t,[{key:"tree",value:function(e,t,a,n,r){var s=this;Object.keys(e).map(function(r){if(n[a]||n.push([]),"SHIFT"==r){if(0==n[a].length&&Object.keys(e).length>1){var l=new d(void 0,void 0,"");l.span=e[r],n[a].push(l)}}else{var c=new d(t,Object.keys(e[r]),r);n[a].push(c),s.incrSpan(t),s.tree(e[r],c,a+1,n)}})}},{key:"incrSpan",value:function(e){e&&(e.span+=1,e.ancestor&&this.incrSpan(e.ancestor))}},{key:"makeHead",value:function(e,t,a){var n={},r=e,s=t,l=Object.keys(r[a]),c=l.length,i={META:s.META},o={};i[a]={META:s[a].META},o[a]={};for(var m=0;m<c&&(!s[a][l[m]].META||!s[a][l[m]].META.isNewSubTable);m++)i[a][[l[m]]]=s[a][l[m]],o[a][[l[m]]]=r[a][l[m]];this.makeHeadRec(o,i,a,n,{val:0});var b=[],p=new d(void 0,Object.keys(b),"");return this.tree(n,p,0,b,[]),b.map(function(e){return u.a.createElement("tr",null,e.map(function(e){return u.a.createElement("th",{colSpan:e.span,style:{wordWrap:"breakWord","font-size":"x-small"}},e.label)}))})}},{key:"makeHeadRec",value:function(e,t,a,n,r){var s=this;e instanceof Array||("c"!=t.META.type||t.META.isNewSubTable?t.META.isNewSubTable||(r.val=r.val+1,Object.keys(e[a]).map(function(l){s.makeHeadRec(e[a],t[a],l,n,r)})):(r.val>0&&(n.SHIFT||(n.SHIFT=r.val),r.val=0),n[a]||(n[a]={}),Object.keys(e[a]).map(function(l){n[a]&&(n[a].SHIFT=n.SHIFT),s.makeHeadRec(e[a],t[a],l,n[a],r)})))}},{key:"bodyTree",value:function(e,t,a,n,r){var s=this,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(e instanceof Array)n.isList||(this.incrSpan(n),n.isList=!0,n.lists=[],n.deep=l,r.push(n)),"dummy"==n.label&&(n.isColumn=!1),n.lists.push(e);else if(t.META&&"r"==t.META.type){var c=new d(n,[],a);if(t[a].META&&t[a].META.isNewSubTable){var i=[],o=[];this.renderSubTableHeader(c,i,o),c.headers=i,c.spans=o;for(var u=0;u<i.length;u++)this.incrSpan(n);c.isNewSubTable=t[a].META.isNewSubTable}n&&n.childs.push(c),e[a]instanceof Array?this.bodyTree(e[a],t[a],"dummy",c,r,l):Object.keys(e[a]).map(function(n){s.bodyTree(e[a],t[a],n,c,r,l+1)})}else e[a]instanceof Array?this.bodyTree(e[a],t[a],"dummy",n,r,l):Object.keys(e[a]).map(function(c){s.bodyTree(e[a],t[a],c,n,r,l)})}},{key:"getPath",value:function(e,t){t.splice(0,0,e.label),e.ancestor&&this.getPath(e.ancestor,t)}},{key:"getSubHeaderRows",value:function(e,t,a,n,r){var s=this;if(e instanceof Array)return null;Object.keys(e).map(function(l){if("META"==l)return null;r[a]||r.push({}),n[a]||n.push([]),n[a].push(l),a>0&&(r[a-1][t]||(r[a-1][t]=0),r[a-1][t]+=1),s.getSubHeaderRows(e[l],l,a+1,n,r)})}},{key:"renderSubTableHeader",value:function(e,t,a){var n=this.props.schema,r=[];this.getPath(e,r);for(var s=0;s<r.length;s++)n=n[r[s]];this.getSubHeaderRows(n,e.label,0,t,a)}},{key:"renderList",value:function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(e.isList){var s,l=u.a.createElement(u.a.Fragment,null,e.lists.map(function(e){return u.a.createElement("td",null,e.toString().replace(/,/g," | "))}));if(e.isNewSubTable){s=e.deep&&r?u.a.createElement("th",{scope:"rowgroup",colSpan:r+1-e.deep,rowSpan:1+e.headers.length},e.label):u.a.createElement("th",{scope:"rowgroup",rowSpan:1+e.headers.length},e.label);for(var c=u.a.createElement(u.a.Fragment,null,this.renderList(e.ancestor,e,u.a.createElement(u.a.Fragment,null,s,e.headers[0].map(function(t){return e.spans[0][t]?u.a.createElement("td",{colSpan:e.spans[0][t]},t):u.a.createElement("td",null,t)})),!0)),i=1;i<e.headers.length;i++)c=u.a.createElement(u.a.Fragment,null,c,this.renderList(e.ancestor,e,u.a.createElement(u.a.Fragment,null,e.headers[i].map(function(e){return u.a.createElement("td",null,e)})),!1));return u.a.createElement(u.a.Fragment,null,c,l)}return s=e.deep&&r?u.a.createElement("th",{scope:"row",colSpan:r+1-e.deep},e.label):u.a.createElement("th",{scope:"row"},e.label),this.renderList(e.ancestor,e,u.a.createElement(u.a.Fragment,null,s,l),!0)}var o=a,d=!1;return e.childs[0]===t&&n&&(o=u.a.createElement(u.a.Fragment,null,u.a.createElement("th",{scope:"rowgroup",rowSpan:e.span},e.label),a),d=!0),e.ancestor?this.renderList(e.ancestor,e,o,d):u.a.createElement("tr",null,o)}},{key:"makeTable",value:function(e,t,a){var n=this,r=(new d(void 0,[],a),[]);this.bodyTree(e,t,a,void 0,r);var s=r[0].deep;return r.map(function(e){return n.renderList(e,void 0,void 0,!0,s)})}},{key:"render",value:function(){var e=this;return u.a.createElement("div",null,Object.keys(this.props.criterias).map(function(t){var a=e.props.criterias,n=e.props.schema;return u.a.createElement(u.a.Fragment,null,u.a.createElement("h4",{style:{textAlign:"center",marginTop:"10px",backgroundColor:"#07265d"}},t),u.a.createElement("table",{className:"table-bordered table-sm",style:{wordWrap:"breakWord","font-size":"x-small"}},u.a.createElement("colgroup",null,u.a.createElement("col",{className:"test"})),u.a.createElement("thead",null,e.makeHead(a,n,t)),u.a.createElement("tbody",null,e.makeTable(e.props.criterias,e.props.schema,t))))}))}}]),t}(o.Component);t.a=m},501:function(e,t,a){},643:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a(5),s=a(8),l=a(7),c=a(9),i=a(2),o=a(0),u=a.n(o),d=(a(19),a(180)),m=a(500),b=a(16),p=a(35),h=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={},a.onDrop=function(e){var t=a.state;t.file=e[0],a.setState(t)},a.uploadCrits=a.uploadCrits.bind(Object(i.a)(Object(i.a)(a))),a.saveCrits=a.saveCrits.bind(Object(i.a)(Object(i.a)(a))),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"uploadCrits",value:function(){var e=this,t=new FormData;t.append("file",this.state.file,this.state.file.name),t.append("faculty","\u041f\u041c-\u041f\u0423"),fetch("/api/uploadCriterias",{method:"POST",credentials:"include",body:t}).then(function(e){return e.json()}).then(function(t){console.log("CR",t);var a=e.state;a.criterias=t,console.log(a.criterias.schema),e.setState(a)}).catch(function(e){return console.log(e)})}},{key:"saveCrits",value:function(){Object(b.b)("/api/saveCriterias",{faculty:p.a.faculty,crits:this.state.criterias}).then(function(e){console.log("SAVE CR",e)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return u.a.createElement("main",null,u.a.createElement("div",{id:"panel",className:"row justify_center"},u.a.createElement("div",{className:"col-9 general"},u.a.createElement("div",{className:"profile",style:{display:"flex","justify-content":"space-between"}},u.a.createElement("div",{className:"centered_ver"},u.a.createElement("p",{className:"headline"},"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u044f\u043c\u0438")),u.a.createElement("div",{className:"centered_ver"},u.a.createElement("button",{id:"DeleteButton",className:"btn btn-secondary",value:"\u041d\u0430\u0437\u0430\u0434",onClick:function(){e.props.history.goBack()}},"\u041d\u0430\u0437\u0430\u0434"))),u.a.createElement("hr",{className:"hr_blue"}),u.a.createElement("div",{style:{display:"flex"}},u.a.createElement("div",{style:{width:"30%"}},u.a.createElement(d.a,{onDrop:this.onDrop,multiple:!1},function(t){var a=t.getRootProps,n=t.getInputProps;return u.a.createElement("section",{className:"container"},u.a.createElement("div",a({className:"dropzone"}),u.a.createElement("input",n()),u.a.createElement("p",null,"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u0441 \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u044f\u043c\u0438")),u.a.createElement("aside",null,u.a.createElement("ul",null,e.state.file&&u.a.createElement("li",{key:e.state.file.name},e.state.file.name," - ",e.state.file.size," bytes")),u.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},u.a.createElement("button",{className:"btn btn-warning",onClick:e.uploadCrits},"\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"),e.state.criterias&&u.a.createElement("button",{className:"btn btn-success",onClick:e.saveCrits},"\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))})),u.a.createElement("div",{style:{width:"70%",height:"100%"}},this.state.criterias&&u.a.createElement(m.a,{criterias:this.state.criterias.crits,schema:this.state.criterias.schema}))))))}}]),t}(o.Component);t.default=h}}]);
//# sourceMappingURL=8.41981b31.chunk.js.map