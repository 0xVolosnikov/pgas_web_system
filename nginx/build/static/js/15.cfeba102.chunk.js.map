{"version":3,"sources":["components/views/staff/staffAnnotationsPage.js"],"names":["StaffAnnotationsPage","props","_this","Object","_home_pgas_pgas_web_system_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","this","_home_pgas_pgas_web_system_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_home_pgas_pgas_web_system_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","state","annotations","criterias","staffContextStore","annotation","learningProfile","schema","getCritsAndSchema","then","getAnnotations","st","setState","_this2","fetchSendWithoutRes","faculty","res","history","push","_this3","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","id","className","style","display","justify-content","value","onClick","goBack","saveAnnotations","placeholder","onChange","e","target","margin","keys","map","crit","Fragment","whiteSpace","width","react_markdown__WEBPACK_IMPORTED_MODULE_12___default","linkTarget","source","Component","observer"],"mappings":"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","file":"static/js/15.cfeba102.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport '../../../style/user_main.css';\nimport '../../../style/add_portfolio.css';\nimport {observer} from \"mobx-react\";\nimport staffContextStore from \"../../../stores/staff/staffContextStore\";\nimport ReactMarkdown from \"react-markdown\";\nimport {fetchSendWithoutRes} from \"../../../services/fetchService\";\n\nclass StaffAnnotationsPage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {annotations: {}, criterias: {}}\n        if (staffContextStore.annotations) this.state.annotation = staffContextStore.annotations\n        if (staffContextStore.learningProfile) this.state.learningProfile = staffContextStore.learningProfile\n    };\n\n    async componentDidMount() {\n        if (!staffContextStore.criterias || !staffContextStore.schema) {\n            staffContextStore.getCritsAndSchema().then()\n        }\n\n        await staffContextStore.getAnnotations();\n        let st = this.state;\n        if (staffContextStore.annotations) st.annotations = staffContextStore.annotations\n        if (staffContextStore.learningProfile) st.learningProfile = staffContextStore.learningProfile\n        this.setState(st)\n    }\n\n\n    saveAnnotations() {\n        fetchSendWithoutRes('/api/updateAnnotations', {\n            faculty: staffContextStore.faculty,\n            annotations: this.state.annotations,\n            learningProfile: this.state.learningProfile\n        }).then((res) => {\n            if (res) {\n                staffContextStore.getAnnotations().then();\n                this.props.history.push('/staff')\n            }\n        })\n    }\n\n    render() {\n        return (\n            <main>\n                <div id=\"panel\" className=\"row justify_center\">\n                    <div className=\"col-9 general\">\n                        <div className=\"profile\" style={{\"display\": \"flex\", \"justify-content\": \"space-between\"}}>\n                            <div className=\"centered_ver\">\n                                <p className=\"headline\">\n                                    Управление примечаниями\n                                </p>\n                            </div>\n                            <div style={{display: \"flex\"}}>\n                                <div className=\"centered_ver\">\n                                    <button id=\"DeleteButton\" className=\"btn btn-danger\"\n                                            value=\"Назад\" onClick={() => {\n                                        this.props.history.goBack()\n                                    }}>Назад\n                                    </button>\n                                </div>\n                                <div className=\"centered_ver\">\n                                    <button id=\"DeleteButton\" className=\"btn btn-success\"\n                                            value=\"Назад\" onClick={() => {\n                                        this.saveAnnotations()\n                                    }}>Сохранить\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                        <hr className=\"hr_blue\"/>\n                        <h5>Какой у вас профиль обучения (что является ДСПО):</h5>\n                                            <textarea className=\"form-control area_text\"\n                                                      placeholder=\"Введите примечания к критерию...\" onChange={(e) => {\n\n                                                let st = this.state;\n                                                st.learningProfile = e.target.value;\n                                                this.setState(st)\n                                            }}\n                                                      value={this.state.learningProfile} style={{margin: \"0\"}}/>\n\n                        {\n                            staffContextStore.criterias &&\n                            <div>\n                                {\n                                    Object.keys(staffContextStore.criterias).map((crit) => {\n                                        return (<>\n                                            <h5>{crit}</h5>\n                                            <div style={{display: \"flex\"}}>\n                                            <textarea className=\"form-control area_text\"\n                                                      placeholder=\"Введите примечания к критерию...\" onChange={(e) => {\n\n                                                let st = this.state;\n                                                st.annotations[crit] = e.target.value;\n                                                this.setState(st)\n                                            }}\n                                                      value={this.state.annotations[crit]} style={{margin: \"0\"}}/>\n                                                <div className=\"desc_selectors\"\n                                                     style={{whiteSpace: \"pre-line\", margin: \"0\", width: \"50%\"}}>\n                                                    <ReactMarkdown className=\"markdown_view\" linkTarget={() => '_blank'}\n                                                                   source={this.state.annotations[crit]}/>\n                                                </div>\n                                            </div>\n                                            <br/>\n                                        </>)\n                                    })\n                                }\n                            </div>\n                        }\n                    </div>\n                </div>\n            </main>)\n    }\n}\n\nexport default observer(StaffAnnotationsPage)"],"sourceRoot":""}