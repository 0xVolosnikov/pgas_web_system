import React, {Component} from 'react';
import '../../../style/user_main.css';
import userPersonalStore from '../../../stores/userPersonalStore';
import {observer} from 'mobx-react';
import {withRouter} from 'react-router-dom';
import logoSPbU from '../../../assets/img/CoA_Small_whitebg-compressed.svg';
/** @jsx jsx */
import {css, jsx} from '@emotion/core';
import styled from '@emotion/styled';

const pageTop = css`
    background-color: white;
    border-bottom: 1px solid #a5a5a5;
    align-items: center;
    font-size: 14px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, .2);
`;

const blockHeader = css`
    color: #4a4a4a;
    display: flex;
    font-size: 14px;
    align-items: center;
    @media only screen and (max-device-width: 480px) {
    max-width: 45%;
  }
`;

const logoBackground = css`
  background-color: #9F2D20;
  height: 60px;
  width: 70px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  clip-path: polygon(0 0, 60% 0, 100% 100%, 40% 100%);
  @media only screen and (max-device-width: 480px) {
    height: 35px;
    width: 40px;
  }
  
`;

const LogoBSS = styled.img`
  height: 55px;
  align-self: center;
  padding-right: 10px;
  @media only screen and (max-device-width: 480px) {
    height: 35px;
  }
`;

const LogoSPbU = styled.img`
  height: 55px;
  @media only screen and (max-device-width: 480px) {
    height: 32px;
  }

`;

const ButtonsBlock = styled.div`
       width: 80%;
       flex: none;
       max-width: none;
       -webkit-flex: none;
`;

const verticalAlign = css`
  display: flex; 
  flex-direction: column; 
  justify-content: center;
`;

const rightPanel = css `
    @media only screen and (max-device-width: 480px) {
    max-width: 55%;
    flex: 0 0 55%;
  }
`;

const FIO = css `
margin-right: 20px; 
font-size: medium;
  @media only screen and (max-device-width: 800px) {
    font-size: small;
  }
  @media only screen and (max-device-width: 480px) {
    font-size: x-small;
  }
`;


class UserHeader extends Component {
  constructor(props) {
    super(props);
    this.switchToStaff = this.switchToStaff.bind(this);
  };

  switchToStaff() {
    this.props.history.push('/staff');
  }

  render() {
    const props = this.props;
    return <header>
      <div className="row" css={pageTop}>
        <div className="col-8" css={blockHeader}>
          <a href={'https://spbu.ru'} target="_blank" rel="noopener noreferrer">
            <LogoSPbU src={logoSPbU} alt={'СПбГУ'}/>
          </a>
          <a href={'https://vk.com/ssspbu'} target="_blank" rel="noopener noreferrer">
            <div css={logoBackground}>
              <LogoBSS src={logoBss} alt={'БСС'}/>
            </div>
          </a>
          <div className="p_header">
            <span css={css`color: #595959;`}>Студенческий совет СПбГУ</span> <br/>
            <span css={css`padding-left: 13px; color: black;`}>{props.pageName}</span>
          </div>
        </div>

        <div className="col-4" css={rightPanel}>
          <div css={css`display: flex; justify-content: flex-end;`}>

            <div css={verticalAlign}>
              <div css={FIO}>
                {userPersonalStore && userPersonalStore.fio}
              </div>
            </div>
            <div>
              <form action="/api/logout">
                <button type="submit"
                  className="btn btn-outline-danger"
                  css={css`
                border-color: #9F2D20;
                color: #9F2D20;
                  @media only screen and (max-device-width: 480px) {
                    font-size: smaller;
                    border-color: transparent;
                 }
                `}
                  action="/api/logout">
                Выход
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </header>;
  }
}

export default withRouter(observer(UserHeader));

const logoBSS = <svg xmlns="http://www.w3.org/2000/svg" height="97.16" width="69.09"><defs><clipPath ><path d="M492.3 240.27c-.58 47.65 28.57 144.73 38.34 178.58.72 2.48-6.25 4.9-8.8 5.14-145.92 13.34-241.76 70.22-242.83 70.87L277.94 512c1.08-.65 73.85-49.2 233.2-73.6 9.3-1.43 28.05-.1 28.05-.1 4.83.5 11.1-.57 7.9-8.14 0 0-3.17-11.23-6.54-19.4-5.4-13.13-36.97-124.43-36.3-179.4z"/></clipPath></defs><path d="M2.75 34.24l1-3.24-1 3.24" fill="#a7a5a6"/><path d="M2.75 34.24l-.7 2.3h.1l.58-2.3" fill="#bdbcbc"/><path d="M.01 54.04L-.01 56l.03.96c.17.1 9.87 6.56 31.08 9.8 1.24.2 3.74.02 3.74.02.64-.07 1.48.08 1.05 1.08 0 0-.42 1.5-.87 2.6-.72 1.75-4.93 16.6-4.84 23.9l3.77 2.8-.02-.22c.2-3.3.8-10.02 1.55-14.04l3.9-20.1c.03-.18-.03-.34-.15-.45-.13-.1-.3-.17-.5-.12a22.7 22.7 0 0 1-1.88.36h0a28 28 0 0 1-5.1.54C23.1 63.3 4.8 55.86.02 54.03zm.15 5.2c.87 8.75 5.2 16.7 11.92 21.64l16.5 12.3c-.08-6.35 3.8-19.3 5.1-23.8.1-.33-.83-.65-1.18-.7C13.1 66.9.35 59.36.16 59.24zm10.62-46.48c.56 1.2 1.6 2.36 1.6 2.36a1.3 1.3 0 0 1 .16.15s.57-.5 2.05-1.07c1.23-.48 2.8-.64 2.8-.64s-1.54-2.14-1.83-5.24a14 14 0 0 1-.08-2.74h-.03v-.01a4 4 0 0 0-2.34.37 7.5 7.5 0 0 0-1.35.94c-.66.6-1.1 1.26-1.28 1.97-.27.76-.37 1.6-.2 2.46.01.07.28.97.52 1.47m6.82-3.18c.67 1.86 1.77 3.4 2.62 3.74.13.06.26.1.37.1h0c.88-.1 2.05-1.88 2.6-4.06.53-2.03.17-3.74-.72-4.46-.2-.15-.43-.28-.66-.4s-.5-.2-.75-.25c-.04-.01-.08-.02-.12-.04.73-.36 1.22-1.16 1.18-2.08A2.2 2.2 0 0 0 20.81.18a2.1 2.1 0 0 0-.83-.15c-1.12.05-2 1.07-1.94 2.28a2.2 2.2 0 0 0 1.37 1.97h0c-.56.15-1.06.43-1.47.8-.83.8-1.04 2.52-.33 4.5m6.03 3.8a16.6 16.6 0 0 0 5.25 1.05c.05.02.08.04.12.06a10.4 10.4 0 0 0 1.2-1.88 11.5 11.5 0 0 0 .52-1.47c.16-.86.07-1.7-.2-2.46-.17-.7-.62-1.37-1.28-1.97a7.3 7.3 0 0 0-1.35-.94l-.02-.01c-.76-.36-1.57-.5-2.36-.38a12.9 12.9 0 0 1-.08 2.74c-.3 3.1-1.83 5.24-1.83 5.24h.04l-.01.01m12.8 22.05h0c-.01 0-.02-.01-.03-.02-.03-.01-.06-.01-.1-.01h-.05l-.34.04c-1.2.07-2.37-.02-3.33-.4-.55-.18-1.02-.5-1.47-.8l-1.55-1.37c-.88-.83-2.56-2.04-4.28-2.2-1.95-.2-3.2.52-4.6 1.07-.13.05-.23.18-.24.33-.01.16.1.3.23.37.05.03.1.05.16.05a18.7 18.7 0 0 1 3.95.7c.93.28 1.85.58 2.57 1.1.96.68 1.78 1.54 2.33 1.9.7.45 1.35.9 2.16 1.05a6.2 6.2 0 0 0 2.59-.13l.1-.03a7.1 7.1 0 0 0 .65-.22 6.2 6.2 0 0 0 .84-.4l.03-.02c.17-.1.35-.18.5-.3.12-.08.18-.2.16-.34-.01-.17-.15-.3-.3-.33m-5.33-12.9c.1.28.38.57.7.76 1.04.6 1.4 1.5-.15 1.68-1.14.13-2.32-.62-6.52.53-2.46.68-5.36 3.16-6.37 4.3-.3.35-.63.77-.93 1.2-.97 1.4-.96 3.3.1 4.65a7.4 7.4 0 0 0 1.53 1.46c3.68 2.5 7.14.43 7.52.05.3-.3.32-.42.26-.5-.01-.01-.02-.01-.03-.01-.01-.01-1.18.62-2.8.62-.93 0-1.88-.16-2.66-.52a6.4 6.4 0 0 1-2.7-2.23c-.5-.82-.4-1.87.2-2.6a12.3 12.3 0 0 1 2.07-1.96 9.4 9.4 0 0 1 5.5-1.9H27a9.7 9.7 0 0 1 3.03.5 10 10 0 0 1 1.39.58c1.35.7 2.52 1.68 3.4 2.9.01 0 .02.01.03.02a11.3 11.3 0 0 0 1.06-2.7l.17-.68c.47-2.06.33-6.86-4.23-6.86-.08 0-.17.04-.25.06-.5.13-.6.4-.5.67m-8.5-8.02a20.6 20.6 0 0 0-4.56.49c-5.8 1.28-9.35 4.64-12.58 11.92a34.3 34.3 0 0 0-1.7 4.02l-1 3.24-.58 2.3h-.1C1.32 39.1.17 42.07.1 44.65.04 46 .05 48.37.05 51.05c.62.3 23.34 9.44 33.9 9.22a68.8 68.8 0 0 0 5.45-.6c.03-.01 2.4-.76 2.54-.27.12.13.2.3.15.5l-4.15 22.26a104.4 104.4 0 0 0-1.42 12.6 20.9 20.9 0 0 0-.03.95c.01.02 2.96-2.05 3.98-2.93 0 0 .08-.54.23-2.9.12-1.85.93-6.28.94-6.3l1.35.8a33 33 0 0 0 4.05 2.49c.02 0 .02.01.03.01.54.28 1.23.23 1.72-.2.65-.56.73-1.53.17-2.2a34.8 34.8 0 0 0-3.3-3.4l-1.77-1.54-1.16-.8.28-1.28 2.42 1.05c1.54.67 3.1 1.42 4.73 1.97a43.7 43.7 0 0 0 4.93 1.33c.64.12 1.3-.17 1.64-.78.4-.75.13-1.68-.62-2.08v-.02c-1.43-.78-2.92-1.5-4.36-2.23-.01 0-.02-.01-.03-.01h0l-2.14-1.04c-.72-.35-1.44-.72-2.16-1.1l-3-1.64.14-.44 6.04 1.3c1.73.32 3.56.73 5.38.85 1.83.12 3.6.16 5.46 0 .66-.06 1.23-.54 1.37-1.22.15-.73-.24-1.44-.9-1.72a1.5 1.5 0 0 0-.32-.1l-.04-.01-5.02-1c-1.66-.34-3.27-.66-4.95-1.13a167.2 167.2 0 0 1-5.79-1.72l.17-.57 2.9.06 7.04-.05c.5 0 .98-.01 1.47-.04.98-.04 1.95-.13 2.9-.27a32.8 32.8 0 0 0 5.64-1.34c.63-.22 1.07-.83 1.03-1.53-.03-.54-.34-1-.77-1.25-.25-.15-.55-.23-.87-.2h-.06c-1.76.1-3.6.22-5.36.24l-2.65.05-1.3-.02c-.47-.02-.92-.03-1.37-.07-1.82-.12-3.65-.27-5.47-.45l-3.4-.37a95.8 95.8 0 0 0 5.35-.74 128.4 128.4 0 0 0 5.87-1.14c1.93-.4 4.03-.86 5.92-1.6 1.92-.74 3.74-1.55 5.53-2.66.58-.35.86-1.06.66-1.74-.12-.4-.4-.74-.76-.92-.35-.2-.77-.25-1.18-.13L67 53c-1.77.53-3.6 1.08-5.43 1.5l-2.72.64a35.9 35.9 0 0 1-2.77.48c-1.9.25-3.8.47-5.72.63-1.22.1-2.48.2-3.7.24l.53-.14a47 47 0 0 0 1.57-.46 65.5 65.5 0 0 0 3.04-1.03 100.3 100.3 0 0 0 5.88-2.38 38.5 38.5 0 0 0 5.76-2.93 34.5 34.5 0 0 0 5.1-4c.5-.48.6-1.24.26-1.86-.16-.28-.4-.5-.67-.62-.45-.22-1-.23-1.45.04l-.06.04a78.6 78.6 0 0 1-5.22 2.81c-1.8.88-3.5 1.7-5.4 2.36a100.7 100.7 0 0 1-5.75 1.82 62.1 62.1 0 0 1-2.88.73l-.64.14a30.6 30.6 0 0 0 1.42-.64 51.6 51.6 0 0 0 3.03-1.61c1.96-1.13 3.82-2.33 5.65-3.6a39.5 39.5 0 0 0 5.37-4.2 34 34 0 0 0 4.43-5.18c.4-.57.35-1.36-.13-1.9-.15-.16-.32-.28-.5-.36-.55-.26-1.2-.2-1.7.25l-.06.05a66.4 66.4 0 0 1-4.76 4.02c-1.65 1.27-3.26 2.5-5.07 3.54-.34.2-.68.38-1.02.57a76.8 76.8 0 0 1-4.55 2.41l-.9.4a30.3 30.3 0 0 1-1.68.72l.3-.2c.66-.46 1.27-.95 1.88-1.44l1-.8a77 77 0 0 0 5.07-4.77l.06-.06c1.7-1.73 3.3-3.52 4.64-5.48a36.3 36.3 0 0 0 3.46-6.27c.26-.64.06-1.4-.53-1.83-.01-.01-.02-.01-.03-.01h0c-.7-.5-1.64-.32-2.13.37l-.05.06a66.7 66.7 0 0 1-4 5.19l-1.28 1.48a33.6 33.6 0 0 1-3.17 3.25l-1.7 1.46a68.2 68.2 0 0 1-3.13 2.51l.5-.64a53.4 53.4 0 0 0 2.46-3.67 100.1 100.1 0 0 0 1.57-2.59c.9-1.5 1.7-3.04 2.42-4.62a32.2 32.2 0 0 0 .88-2.15c.85-2.37 1.53-4.72 1.9-7.3.1-.7-.3-1.4-1-1.65-.02 0-.02-.01-.03-.01-.8-.28-1.67.13-1.95.93l-.03.08c-.64 1.82-1.42 3.7-2.26 5.5-.13.3-.25.6-.4.87-.95 1.95-1.94 3.88-3.1 5.68-.07.1-.13.22-.2.32a79.3 79.3 0 0 1-2.7 3.71 39.4 39.4 0 0 1-10.28 7.64c-1.27.62-2.56 1.46-3.86 2.1l-.06.03c-.88.42-1.63 1.1-2.07 1.97a6.4 6.4 0 0 0-.28.7c-.14.42-.22.86-.22 1.33 0 1.67.9 3.27 2.27 3.98.45.25.96.4 1.5.4.1 0 .16-.01.24-.02.47-.05.72-.25.72-.25s-.36-.98.2-1.42a2 2 0 0 1 .29-.16 2 2 0 0 1 .84-.2c.28 0 .55.06.8.16.73.32 1.23 1.04 1.23 1.88 0 1.04-.78 1.9-1.8 2.03a6.4 6.4 0 0 1-1.89.21 18.5 18.5 0 0 1-3.38-.32 18.6 18.6 0 0 1-4.28-1.36 22.7 22.7 0 0 1-4.57-3.07c-3.08-2.86-5.02-6.78-5.2-11.12-.01-.2-.03-.4-.03-.6a16.8 16.8 0 0 1 .12-1.91 16.8 16.8 0 0 1 .7-3.14c.6-1.82 1.5-3.52 2.68-4.98.1-.14.64-.72 1.32-1.4l.14-.14c.75-.74 1.66-1.56 2.43-2.07h0a3.5 3.5 0 0 1-.22-.2 5.1 5.1 0 0 1-.26-.26c-1.42-.14-1.92-.8-2.16-1.38-.01-.02-.02-.04-.02-.05l-.05-.13c-.07-.2-.07-.86-.04-.95a2.7 2.7 0 0 1 .69-1.29c.13-.14.26-.27.4-.38a3.3 3.3 0 0 1 1.43-.61 3.8 3.8 0 0 1 .39-.06c.02 0 .03-.01.05-.01 1.3-.14 2.6.43 3.14 1.78v.01c-.07.05-.83.2-.83.2h0c-.27-.58-.72-.82-1.24-.78a1.9 1.9 0 0 0-.55.13c-.12.05-.23.1-.3.2-.84.72-.1 2.54 1.07 2.66a1.2 1.2 0 0 0 .58-.08c.01 0 .02 0 .02-.01a51.8 51.8 0 0 1 5.74-1.29c.38-.06.7-.1.96-.12.01 0 .02-.01.02-.01h0c.34-.55.36-4.18-2.5-5.36-2.26-.93-4.2-1.08-6-1.1z" fill="#d3d2d2"/><path d="M39.38 59.67l2-.4c.2-.05.4.01.54.13-.15-.5-2.5.26-2.54.27" fill="#bdbcbc"/></svg>;