function getAcievement(){var t=new XMLHttpRequest;t.open('GET','/getUserInfo',!0);t.onload=function(){let e=JSON.parse(t.responseText);document.getElementById('username').innerHTML=e.LastName+' '+e.FirstName+' '+e.Patronymic;document.getElementById('faculty').innerHTML=e.Faculty;document.getElementById('course').innerHTML=e.Course;let s="";console.log($('#achBlock').width());$('#achBlock').width()<600?(s='<table class="table table-sm">'):(s='<table class="table">');s+='<thead><th>Критерий</th><th>Достижение</th><th style="text-align: center">Статус</th><th style="text-align: center">Балл</th><th>Комментарий</th></thead><tbody>';let n=e.Achs.length;n>1&&(e.Achs=e.Achs.sort(function(t,e){if(!t||!e)return 0;if(t.crit>e.crit){return 1}if(t.crit<e.crit){return-1}return 0}));for(let t=0;t<n;++t){if(!e.Achs[t])continue;s+='<tr id="TR'+t+'" style="cursor: pointer"><td>'+e.Achs[t].crit+'</td>';s+='<td>'+e.Achs[t].achievement+'</td>';e.Achs[t].status=='Изменено'?(s+='<td class="table-warning" style="text-align: center">'+e.Achs[t].status+'</td>'):e.Achs[t].status=='Принято'?(s+='<td class="table-success" style="text-align: center">'+e.Achs[t].status+'</td>'):e.Achs[t].status=='Отказано'?(s+='<td class="table-danger" style="text-align: center">'+e.Achs[t].status+'</td>'):(s+='<td style="text-align: center">'+e.Achs[t].status+'</td>');s+='<td style="text-align: center">'+(e.Achs[t].ball?e.Achs[t].ball:'-')+'</td>';s+='<td>'+(e.Achs[t].comment?e.Achs[t].comment:'')+'</td>';s+='</tr>'}s+='</tbody></table>';document.getElementById('row_docs').innerHTML=s;$('#panel').fadeIn(60);for(let t=0;t<n;++t){if(!e.Achs[t])continue;var c=document.getElementById('TR'+t);c.onclick=function(){editAch(e.Achs[t]._id.toString())}}s='';for(let t=0;t<n;++t){if(!e.Achs[t])continue;if(e.Achs[t].Status==='Ожидает проверки'){continue}s+='<div class="name"> <h4>'+e.Achs[t].date+'</h4> <block_2>';for(let n of e.Achs[t].files)s+="<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/uploads/"+n+'" class="goto">Подтверждающий документ</a></p>';s+='<p>Критерий: <criteria class="info">'+e.Achs[t].crit+'</criteria></p><p>Статус: <status class="info">'+e.Achs[t].status+'</status></p> </block_2> </div>'}document.getElementById('archive_docs').innerHTML=s;$('.name h4').click(function(){$(this).parent().find('block_2').is(':visible')?$(this).parent().find('block_2').hide(200):$(this).parent().find('block_2').show(200)})};$('.category h3').click(function(){$(this).parent().find('block_1').is(':visible')?$(this).parent().find('block_1').hide(200):$(this).parent().find('block_1').show(200)});t.send()}function editAch(t){$(location).attr('href','/achievement/'+t)}getAcievement()
